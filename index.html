<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="manifest" href="manifest.json" />
    <!-- All Apple touch icons for iPad, iPhone, iPod -->
    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="favicons/apple-touch-icon-57x57.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="favicons/apple-touch-icon-60x60.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="favicons/apple-touch-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="favicons/apple-touch-icon-76x76.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="favicons/apple-touch-icon-114x114.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="favicons/apple-touch-icon-120x120.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="favicons/apple-touch-icon-144x144.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="favicons/apple-touch-icon-152x152.png"
    />

    <!-- All favicon sizes - for all devices and browsers -->
    <link
      rel="icon"
      type="image/png"
      href="favicons/favicon-196x196.png"
      sizes="196x196"
    />
    <link
      rel="icon"
      type="image/png"
      href="favicons/favicon-96x96.png"
      sizes="96x96"
    />
    <link
      rel="icon"
      type="image/png"
      href="favicons/favicon-32x32.png"
      sizes="32x32"
    />
    <link
      rel="icon"
      type="image/png"
      href="favicons/favicon-16x16.png"
      sizes="16x16"
    />
    <link
      rel="icon"
      type="image/png"
      href="favicons/favicon-128.png"
      sizes="128x128"
    />

    <!-- A favicon with four different sizes -->
    <link rel="shortcut icon" type="image/x-icon" href="favicons/favicon.ico" />

    <!-- Application color for Microsoft Windows app tile and Android status bar -->
    <meta name="theme-color" content="#edc22e" />
    <meta name="msapplication-TileColor" content="#edc22e" />

    <!-- Application name for Microsoft Windows app tile -->
    <meta name="application-name" content="Create PWA" />

    <!-- Application icons for Microsoft Windows app tile -->
    <meta
      name="msapplication-TileImage"
      content="favicons/mstile-144x144.png"
    />
    <meta
      name="msapplication-square70x70logo"
      content="favicons/mstile-70x70.png"
    />
    <meta
      name="msapplication-square150x150logo"
      content="favicons/mstile-150x150.png"
    />
    <meta
      name="msapplication-wide310x150logo"
      content="favicons/mstile-310x150.png"
    />
    <meta
      name="msapplication-square310x310logo"
      content="favicons/mstile-310x310.png"
    />

    <!-- Application config file for Microsoft browsers -->
    <meta name="msapplication-config" content="config.xml" />
    <title>籤筒</title>
  </head>
  <style>
    body {
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100vw;
      height: 100vh;
      text-align: center;
      overflow: hidden;
      user-select: none;
      font-family: "微軟正黑體";
      background: url("images/bg.jpg") fixed center;
      background-size: cover;
    }
    .container {
      background: rgba(0, 0, 0, 0.5);
      padding: 0 20px;
      border-radius: 5px;
    }
    button {
      border-radius: 5px;
      padding: 5px;
      cursor: pointer;
      background: #fff;
    }
    button:hover {
      color: lightcoral;
    }
    ul li {
      text-align: left;
      line-height: 1.5em;
      color: #fff;
      font-weight: 600;
    }
  </style>

  <body>
    <div class="container">
      <h1 style="font-size: 1.5em; text-align: center; color: #fff;">
        抽籤系統 Version 2.1.0
      </h1>
      <div style="margin-bottom: 20px;">
        <div
          id="info"
          style="
            width: 250px;
            border: 1px dashed #fff;
            border-radius: 5px;
            padding: 0 10px;
            height: 200px;
            overflow: auto;
            text-align: center;
            letter-spacing: 3px;
            margin: auto;
          "
        ></div>
      </div>
      <div style="text-align: center; margin-top: 20px;">
        <div>
          <label for="lots"></label>
          <input
            type="text"
            id="lots"
            style="
              padding: 10px;
              border-radius: 5px;
              width: 250px;
              letter-spacing: 3px;
            "
            maxlength="10"
            placeholder="Enter here"
          />
        </div>
        <div
          style="
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            width: 100%;
          "
        >
          <button id="btn">放入籤筒</button>
          <button id="btnClear">清除籤筒</button>
          <button id="btnSort">隨機排序</button>
          <button id="btnDraw">隨機抽籤</button>
        </div>
        <div style="text-align: center; margin-top: 5px;">
          <button id="btnTarot" style="width: 100%;">放入塔羅牌</button>
        </div>
      </div>
      <div style="text-align: center; color: #fff; letter-spacing: 2px;">
        | 籤筒 目前共有<span id="total" style="color: lightCoral;">0</span>支籤
        |
      </div>
    
      <p style="text-align: center; color: #fff;">
        &copy; Designed by David Huang
      </p>
    </div>
  </body>
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./service-worker.js").then(
          (registration) => {
            console.log(
              `ServiceWorker registration successful with scope: ${registration.scope}`
            );
          },
          (error) => {
            console.log(`ServiceWorker registration failed: ${error}`);
          }
        );
      });
    }
  </script>
  <script src="tarot.js"></script>
  <script>
    var btn = document.getElementById("btn");
    var btnSort = document.getElementById("btnSort");
    var lots = document.getElementById("lots");
    var info = document.getElementById("info");
    var total = document.getElementById("total");
    var arr = [];
    var showText = null;
    var show = function () {
      arr.reverse();
      showText = "<ul><li>" + arr.join("</li><li>") + "</li></ul>";
      if (arr.length == 0) {
        showText = null;
      }
      info.innerHTML = showText;
      total.innerHTML = arr.length;
    };
    var add = function () {
      if (lots.value == "") {
        return false;
      }
      arr.push(lots.value);
      lots.value = "";
      show();
    };
    window.addEventListener("keydown", function () {
      switch (event.keyCode) {
        case 13:
          add();
          break;
      }
    });
    btn.addEventListener("click", function () {
      add();
    });
    btnSort.addEventListener("click", function () {
      arr.sort(function (a, b) {
        return Math.random() - 0.5;
      });
      show();
    });
    btnClear.addEventListener("click", function () {
      arr = [];
      show();
    });
    btnDraw.addEventListener("click", function () {
      let num = Math.floor(arr.length * Math.random());
      let drawNum = arr[num];
      arr.splice(num, 1);
      if (!drawNum) {
        alert("已經沒有籤了");
      } else {
        alert(drawNum);
      }
      show();
    });
    btnTarot.addEventListener("click", function () {
      arr = arr.concat(tarot);
      show();
    });
  </script>
</html>
